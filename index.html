<!DOCTYPE html>
<html lang="en" >
<head>
  	<meta charset="UTF-8">
  	<title>31262 - Final Graphics Project</title>
	<link href="https://fonts.googleapis.com/css?family=Saira" rel="stylesheet"><link rel="stylesheet" href="./style.css">

</head>
<body>
	<div id="content">
    
		<label for="thefile" class="file"> Choose an audio file
		  <input type="file" id="thefile" accept="audio/*" />
		</label>

		
	
		<audio id="audio" controls></audio>
		<div id="out"></div>
	</div>


<!-- partial -->
<script src='js/three.min.js'></script>
<script src="js/dat.gui.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/simplex-noise/2.3.0/simplex-noise.min.js'></script>
<script src="js/TweenMax.min.js"></script>
<script src="./FinalProject.js"></script>
<script src="js/PLYLoader.js"></script>
<script src="js/GLTFLoader.js"></script>

<script type="x-shader/x-vertex" id="vertex_shader_rgb">

	varying vec2 v_uv;
	
	void main() {
		v_uv = uv;
	
		gl_Position = vec4(position, 1.0);
	}
</script>

<script type="x-shader/x-fragment" id="fragment_shader_rgb">

	uniform vec2 u_resolution;
	uniform vec2 u_mouse;
	uniform float u_time;
	uniform float u_frame;
	
	uniform sampler2D u_texture;
	
	varying vec2 v_uv;
	
	void main() {
		float angle = u_time;
		vec2 red_offset = vec2(cos(angle), sin(angle));
		angle += radians(120.0);
		vec2 green_offset = vec2(cos(angle), sin(angle));
		angle += radians(120.0);
		vec2 blue_offset = vec2(cos(angle), sin(angle));
	
		float offset_size = 0.1 * length(gl_FragCoord.xy - 0.5 * u_resolution);
	
		offset_size *= u_mouse.x / u_resolution.x;
	
		float red = texture2D(u_texture, v_uv - offset_size * red_offset / u_resolution).r;
		float green = texture2D(u_texture, v_uv - offset_size * green_offset / u_resolution).g;
		float blue = texture2D(u_texture, v_uv - offset_size * blue_offset / u_resolution).b;
	
		gl_FragColor = vec4(red, green, blue, 1.0);
	}
</script>


</body>
</html>
